{"is_source_file": true, "format": "Python", "description": "This file defines an API router for debugging and inspecting database configuration settings within a FastAPI backend, including endpoints for retrieving effective database connection parameters and environment variable statuses.", "external_files": ["../core/config", "../core/logger", "../db/sqlalchemy"], "external_methods": ["get_settings", "get_logger", "get_effective_db_params"], "published": ["debug_config"], "classes": [{"name": "DBConfigDebug", "description": "A Pydantic model representing effective database configuration details for diagnostics, including source, host, port, database, driver, URL, and environment variable presence."}], "methods": [{"name": "str _detect_db_source()", "description": "Determines which database configuration source is active based on environment variables and settings precedence.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] _redact_env_url(url: Optional[str])", "description": "Redacts sensitive credentials from database URL strings for safe logging.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _env_presence()", "description": "Checks environment variables to determine whether database-related env vars are set.", "scope": "", "scopeKind": ""}, {"name": "DBConfigDebug debug_config()", "description": "FastAPI endpoint that returns the current effective database configuration and environment status for debugging purposes.", "scope": "", "scopeKind": ""}], "calls": ["get_effective_db_params", "get_settings", "get_logger"], "search-terms": ["FastAPI debug endpoint", "database configuration", "DB config debug", "environment variable check", "redacted database URL"], "state": 2, "file_id": 28, "knowledge_revision": 154, "git_revision": "", "ctags": [{"_type": "tag", "name": "DBConfigDebug", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^class DBConfigDebug(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_detect_db_source", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^def _detect_db_source() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_env_presence", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^def _env_presence() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_redact_env_url", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^def _redact_env_url(url: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(url: Optional[str])"}, {"_type": "tag", "name": "database", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    database: Optional[str] = Field(None, description=\"Effective database name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "debug_config", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^def debug_config() -> DBConfigDebug:$/", "language": "Python", "typeref": "typename:DBConfigDebug", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "driver", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    driver: str = Field(..., description=\"Resolved SQLAlchemy driver (e.g., psycopg2)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "env_presence", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    env_presence: Dict[str, Any] = Field(..., description=\"Presence flags of env vars (.env load/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "host", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    host: Optional[str] = Field(None, description=\"Effective database host\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    notes: Optional[str] = Field(None, description=\"Additional notes or warnings about precedenc/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    port: Optional[str] = Field(None, description=\"Effective database port\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "redacted_url", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    redacted_url: Optional[str] = Field(None, description=\"Redacted connection URL suitable for /", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^router = APIRouter(prefix=\"\\/debug\", tags=[\"Health\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "source", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    source: str = Field(..., description=\"Which configuration source is active (DATABASE_URL, SU/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}, {"_type": "tag", "name": "sslmode_present", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/debug.py", "pattern": "/^    sslmode_present: bool = Field(..., description=\"Whether sslmode is present on the connection/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "DBConfigDebug", "scopeKind": "class"}], "hash": "f2d0b6e91409f924975922fb5f50f376", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/debug.py", "fields": [{"name": "Optional[str] database", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "str driver", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] env_presence", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] host", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] notes", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] port", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] redacted_url", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/debug\", tags=[\"Health\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str source", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}, {"name": "bool sslmode_present", "scope": "DBConfigDebug", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"154": ""}]}