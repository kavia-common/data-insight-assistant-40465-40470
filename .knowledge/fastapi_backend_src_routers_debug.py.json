{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI router for debugging and health checks related to database configuration. It includes functions to detect the database source, redact URLs, parse connection parameters, and expose a diagnostic endpoint that reports the current database configuration without exposing secrets.", "external_files": ["../core/config", "../core/logger"], "external_methods": ["get_settings", "get_logger"], "published": ["debug_config"], "classes": [{"name": "DBConfigDebug", "description": "Pydantic model representing the effective database configuration for diagnostics, including source, host, port, database, sslmode, driver, redacted URL, environment variable presence, and notes."}], "methods": [{"name": "_detect_db_source", "description": "Determines which database configuration source is active based on environment variables and settings, prioritizing DATABASE_URL, then SUPABASE_DB_CONNECTION_STRING, then discrete environment variables."}, {"name": "_redact_env_url", "description": "Redacts sensitive parts of a database URL, masking credentials for logging purposes."}, {"name": "_parse_effective_params_from_url", "description": "Parses a database URL to extract host, port, database name, driver, and sslmode presence, returning a dictionary with these details and a redacted URL."}, {"name": "debug_config", "description": "FastAPI endpoint that returns the current effective database configuration, including source, host, port, database, sslmode, driver, and a redacted URL, for diagnostic purposes."}], "calls": ["get_settings", "get_logger", "_detect_db_source", "_redact_env_url", "_parse_effective_params_from_url"], "search-terms": ["FastAPI debug router", "database configuration diagnostics", "URL redaction", "DB source detection", "environment variable parsing"], "state": 2, "file_id": 28, "knowledge_revision": 189, "git_revision": "b71603ac8aa245277a7270ef7c15b5979c0117b8", "revision_history": [{"154": ""}, {"159": "b71603ac8aa245277a7270ef7c15b5979c0117b8"}, {"189": "b71603ac8aa245277a7270ef7c15b5979c0117b8"}], "ctags": [], "filename": "fastapi_backend/src/routers/debug.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/data-insight-assistant-40465-40470.git:kavia-main"}