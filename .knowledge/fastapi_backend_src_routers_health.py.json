{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints related to application health checks using FastAPI and SQLAlchemy. It includes routes for overall service health, database connectivity checks, and environment validation, utilizing dependency injection, external service calls, and structured responses.", "external_files": ["../core/config", "../core/logger", "../db/sqlalchemy", "../models/schemas", "../services/supabase_client"], "external_methods": ["get_settings", "get_logger", "get_db", "get_engine", "supabase_health"], "published": ["router"], "classes": [{"name": "HealthResponse", "description": "Pydantic model schema defining the health response payload, assumed to include at least a 'status' field."}], "methods": [{"name": "Dict[str,Any] _db_ping(db: Session)", "description": "Performs a lightweight database ping using a simple SELECT 1 query to check database availability.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _effective_env_presence()", "description": "Checks and reports the presence of critical environment variables without exposing secrets to verify environment configuration.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse get_health(db: Session = Depends(get_db))", "description": "Main health endpoint that returns application liveness status, including database and Supabase health diagnostics.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse get_healthz(db: Session = Depends(get_db))", "description": "Alias endpoint for /health, providing the same health status response for platform-specific liveness checks.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse health_db()", "description": "Performs a direct database connectivity check via SQLAlchemy engine, returning status or detailed error diagnostics.", "scope": "", "scopeKind": ""}], "calls": ["get_settings", "get_logger", "get_db", "get_engine", "supabase_health"], "search-terms": ["FastAPI health endpoints", "database ping", "environment variable check", "SQLAlchemy direct connect", "supabase health", "health route prefix", "/healthz", "lightweight DB check"], "state": 2, "file_id": 14, "knowledge_revision": 142, "git_revision": "e067de21ffef257c6850ad602fa3464ee5e7630e", "revision_history": [{"33": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"52": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"54": "611216618f77af53c3d7e143d1e5c7804055cfd7"}, {"64": "e066466406a1f25826a845ca7eb714d14a9e707b"}, {"88": "e066466406a1f25826a845ca7eb714d14a9e707b"}, {"99": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"109": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"131": "822197812f72cca059d4c53b49ce954445db8e09"}, {"138": "0bc30f0d68e1d20e720a275bd477e640dba2e54c"}, {"142": "e067de21ffef257c6850ad602fa3464ee5e7630e"}], "ctags": [{"_type": "tag", "name": "_db_ping", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def _db_ping(db: Session) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(db: Session)"}, {"_type": "tag", "name": "_effective_env_presence", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def _effective_env_presence() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_logger", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^_logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_health", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def get_health(db: Session = Depends(get_db)) -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_healthz", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def get_healthz(db: Session = Depends(get_db)) -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "health_db", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def health_db() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^router = APIRouter(prefix=\"\\/health\", tags=[\"Health\"])$/", "language": "Python", "kind": "variable"}], "hash": "9b804df56c1f74bdc926cc290fc102a6", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/health.py", "fields": [{"name": "_logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/health\", tags=[\"Health\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}