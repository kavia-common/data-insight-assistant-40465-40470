{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI router for handling Natural Language Queries (NLQ). It includes endpoint implementation for executing NLQ, helper functions for query parameter processing, filtering, and sorting, and references to database models, schemas, and services related to NLQ processing.", "external_files": ["../core/config", "../db/sqlalchemy", "../models/schemas", "../services/nlq_service", "../models/sql_models"], "external_methods": ["get_settings", "get_db", "parse_nlq_to_query"], "published": ["router"], "classes": [{"name": "NLQRequest", "description": "Schema for the incoming NLQ request containing the query string and optional parameters."}, {"name": "NLQResponse", "description": "Schema for the response containing the query results, metadata, and filters applied."}, {"name": "PaginationMeta", "description": "Schema for pagination metadata including total count, limit, and offset."}, {"name": "Item", "description": "SQLAlchemy model representing the items being queried."}], "methods": [{"name": "_coalesce_limit_offset", "description": "Determines the limit and offset for pagination, using defaults if not provided."}, {"name": "_apply_filter", "description": "Applies filtering conditions to a SQLAlchemy select statement based on provided filter dictionary."}, {"name": "_apply_sort", "description": "Applies sorting to a SQLAlchemy select statement based on sort specifications and request parameters."}, {"name": "execute_nlq", "description": "Main endpoint function that processes the NLQ request, executes the query, and returns results."}], "calls": ["get_settings", "get_db", "parse_nlq_to_query", "select", "func.count", "text", "db.execute", "db.execute", "db.execute", "db.execute"], "search-terms": ["NLQ", "Natural Language Query", "FastAPI NLQ router", "NLQ endpoint", "sqlalchemy filter", "NLQ request handler"], "state": 2, "file_id": 16, "knowledge_revision": 184, "git_revision": "822197812f72cca059d4c53b49ce954445db8e09", "revision_history": [{"36": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"48": "48a66c85da4fa1becca41ec960bc7ae7315bca28"}, {"90": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"102": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"108": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"114": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"184": "822197812f72cca059d4c53b49ce954445db8e09"}], "ctags": [], "filename": "fastapi_backend/src/routers/nlq.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/data-insight-assistant-40465-40470.git:kavia-main"}