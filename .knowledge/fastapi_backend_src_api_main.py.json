{"is_source_file": true, "format": "Python", "description": "This file is the main entry point of a FastAPI backend application. It sets up the FastAPI app, middleware, event handlers for startup and shutdown, and includes routers for various API segments such as health, data, NLQ, and Supabase. It also contains a root health check endpoint.", "external_files": ["../core/config", "../core/logger", "../routers/health", "../routers/data", "../routers/nlq", "../routers/supabase", "../db/sqlalchemy", "../models/sql_models"], "external_methods": ["get_settings", "get_logger", "get_engine"], "published": ["app"], "classes": [{"name": "FastAPI", "description": "The main FastAPI application object initialized with metadata, middleware, and routers."}], "methods": [{"name": "startup_event()", "description": "Async function to initialize database schema and verify connectivity at app startup.", "scope": "", "scopeKind": ""}, {"name": "shutdown_event()", "description": "Async function to clean up resources (dispose engine) at app shutdown.", "scope": "", "scopeKind": ""}, {"name": "health_check_root()", "description": "A simple health check endpoint at root URL.", "scope": "", "scopeKind": ""}], "calls": ["get_settings", "get_logger", "get_engine", "Base.metadata.create_all", "engine.connect", "conn.execute", "uvicorn.run"], "search-terms": ["FastAPI application", "startup event", "shutdown event", "routers", "health check", "sqlalchemy engine", "async startup", "async shutdown"], "state": 2, "file_id": 3, "knowledge_revision": 130, "git_revision": "50400fc0d5416538c80ce5b0ec58ff4323335ca3", "revision_history": [{"9": "f5573ad2dcba0228960eb44dd518474209da253d"}, {"30": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"39": "424df1b57fe5cbfc9c55e7130efd46d9eeab41b1"}, {"41": "424df1b57fe5cbfc9c55e7130efd46d9eeab41b1"}, {"53": "c5fb86836dd75e251cc1243e457bc0afa14058b7"}, {"60": "9feeee3823d488a0ac654ee2b46d0cb43a4a0f08"}, {"67": "1d320ebbeb80b14a5e616b85c1284bc89f23cd1e"}, {"73": "1d320ebbeb80b14a5e616b85c1284bc89f23cd1e"}, {"77": "cd3cb753935cd00a804626f995db1c0df32b9b54"}, {"81": "833254af8fe3a31e1205d9a972f70a1a020b4562"}, {"116": "822197812f72cca059d4c53b49ce954445db8e09"}, {"119": "822197812f72cca059d4c53b49ce954445db8e09"}, {"126": "b4bd1ec8ce9dc6dfa5f4405cd37bcad0304f02b7"}, {"130": "50400fc0d5416538c80ce5b0ec58ff4323335ca3"}], "ctags": [{"_type": "tag", "name": "_lazy_engine", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from ..db.sqlalchemy import get_engine as _lazy_engine$/", "file": true, "language": "Python", "kind": "unknown", "scope": "shutdown_event", "scopeKind": "function", "nameref": "unknown:get_engine"}, {"_type": "tag", "name": "_lazy_engine", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from ..db.sqlalchemy import get_engine as _lazy_engine$/", "file": true, "language": "Python", "kind": "unknown", "scope": "startup_event", "scopeKind": "function", "nameref": "unknown:get_engine"}, {"_type": "tag", "name": "_sql_text", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from sqlalchemy import text as _sql_text$/", "file": true, "language": "Python", "kind": "unknown", "scope": "startup_event", "scopeKind": "function", "nameref": "unknown:text"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "data_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.data import router as data_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "health_check_root", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^def health_check_root():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.health import router as health_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "nlq_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.nlq import router as nlq_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "origins", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^origins = settings.cors_origins_list()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^    port = int(os.getenv(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^settings = get_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "shutdown_event", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^async def shutdown_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startup_event", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^async def startup_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "supabase_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.supabase import router as supabase_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}], "hash": "4c87416a1664f4162068579ccbbd8467", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "origins = settings.cors_origins_list()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.getenv(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}]}