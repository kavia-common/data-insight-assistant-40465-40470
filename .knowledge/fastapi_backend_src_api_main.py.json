{"is_source_file": true, "format": "Python", "description": "This Python source file initializes a FastAPI web application, configuring middleware, startup and shutdown events, and including various API routers for different functionalities like health checks, data access, natural language queries, and Supabase integrations. It sets up application metadata, CORS policies, and server startup logic related to database connectivity.", "external_files": ["../core/config", "../core/logger", "../routers/health", "../routers/data", "../routers/nlq", "../routers/supabase", "../routers/debug", "../db/sqlalchemy", "../models/sql_models"], "external_methods": ["get_settings", "get_logger", "health_router", "data_router", "nlq_router", "supabase_router", "debug_router", "get_engine", "Base.metadata.create_all", "logger.info", "logger.warning", "logger.error"], "published": ["app", "health_check_root"], "classes": [], "methods": [{"name": "startup_event()", "description": "Asynchronous startup hook that initializes the database by creating tables and verifying connectivity.", "scope": "", "scopeKind": ""}, {"name": "shutdown_event()", "description": "Asynchronous shutdown hook that disposes of the SQLAlchemy engine.", "scope": "", "scopeKind": ""}, {"name": "health_check_root()", "description": "Function providing a simple health check response for the root URL.", "scope": "", "scopeKind": ""}], "calls": ["fastapi.FastAPI", "fastapi.middleware.cors.CORSMiddleware", "fastapi.responses.ORJSONResponse", "../core/config.get_settings", "../core/logger.get_logger", "..routers.health.router", "..routers.data.router", "..routers.nlq.router", "..routers.supabase.router", "..routers.debug.router", "../db.sqlalchemy.get_engine", "../models.sql_models.Item", "logger.info", "logger.warning", "logger.error", "uvicorn.run"], "search-terms": ["FastAPI application initialization", "API routers inclusion", "database setup lazy connection", "CORS configuration", "OpenAPI metadata", "startup event database creation", "shutdown engine disposal", "health root endpoint"], "state": 2, "file_id": 3, "knowledge_revision": 155, "git_revision": "7e8e80eec125b3f2d241850cf14e23b1923a12fb", "revision_history": [{"9": "f5573ad2dcba0228960eb44dd518474209da253d"}, {"30": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"39": "424df1b57fe5cbfc9c55e7130efd46d9eeab41b1"}, {"41": "424df1b57fe5cbfc9c55e7130efd46d9eeab41b1"}, {"53": "c5fb86836dd75e251cc1243e457bc0afa14058b7"}, {"60": "9feeee3823d488a0ac654ee2b46d0cb43a4a0f08"}, {"67": "1d320ebbeb80b14a5e616b85c1284bc89f23cd1e"}, {"73": "1d320ebbeb80b14a5e616b85c1284bc89f23cd1e"}, {"77": "cd3cb753935cd00a804626f995db1c0df32b9b54"}, {"81": "833254af8fe3a31e1205d9a972f70a1a020b4562"}, {"116": "822197812f72cca059d4c53b49ce954445db8e09"}, {"119": "822197812f72cca059d4c53b49ce954445db8e09"}, {"126": "b4bd1ec8ce9dc6dfa5f4405cd37bcad0304f02b7"}, {"130": "50400fc0d5416538c80ce5b0ec58ff4323335ca3"}, {"155": "7e8e80eec125b3f2d241850cf14e23b1923a12fb"}], "ctags": [{"_type": "tag", "name": "_lazy_engine", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from ..db.sqlalchemy import get_engine as _lazy_engine$/", "file": true, "language": "Python", "kind": "unknown", "scope": "shutdown_event", "scopeKind": "function", "nameref": "unknown:get_engine"}, {"_type": "tag", "name": "_lazy_engine", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from ..db.sqlalchemy import get_engine as _lazy_engine$/", "file": true, "language": "Python", "kind": "unknown", "scope": "startup_event", "scopeKind": "function", "nameref": "unknown:get_engine"}, {"_type": "tag", "name": "_sql_text", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^        from sqlalchemy import text as _sql_text$/", "file": true, "language": "Python", "kind": "unknown", "scope": "startup_event", "scopeKind": "function", "nameref": "unknown:text"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "data_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.data import router as data_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "debug_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.debug import router as debug_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "health_check_root", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^def health_check_root():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.health import router as health_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "nlq_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.nlq import router as nlq_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "origins", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^origins = settings.cors_origins_list()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^    port = int(os.getenv(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^settings = get_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "shutdown_event", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^async def shutdown_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startup_event", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^async def startup_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "supabase_router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/api/main.py", "pattern": "/^from ..routers.supabase import router as supabase_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}], "hash": "5a48d03ceb0af17b41102cb1244a421b", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "origins = settings.cors_origins_list()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.getenv(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}]}