{"is_source_file": true, "format": "Python", "description": "This is a FastAPI router module that provides health check endpoints, including service liveness and database connectivity checks. It defines route handlers for endpoints like /health, /healthz, and /health/db, to report application health status and database availability. The module uses dependency injection, environment checking, and local imports for database connectivity to ensure safe and effective health diagnostics.", "external_files": ["../core/config", "../core/logger", "../models/schemas", "../db/sqlalchemy"], "external_methods": ["get_settings", "get_logger", "HealthResponse", "get_engine", "get_effective_db_params"], "published": ["router"], "classes": [], "methods": [{"name": "Dict[str,Any] _effective_env_presence()", "description": "Checks presence of critical environment variables related to database configuration and other environment settings, returning a dictionary with boolean flags indicating whether each setting is set.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse get_health()", "description": "Handler for the /health endpoint providing a simple, non-DB liveness check that always returns status 'ok'.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse get_healthz()", "description": "Alias for /health that provides the same liveness status response.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse health_db()", "description": "Handler for /health/db that performs a lightweight SQL query to check database connectivity, returning 'ok' if successful or raising an HTTP 503 error if not.", "scope": "", "scopeKind": ""}], "calls": ["get_settings", "get_logger", "HealthResponse", "get_engine", "get_effective_db_params", "text", "conn.execute", "result.scalar_one_or_none"], "search-terms": ["health.py", "FastAPI health router", "database connectivity", "liveness check", "SQLAlchemy SELECT 1", "ide-based health endpoints", "no-db mode"], "state": 2, "file_id": 14, "knowledge_revision": 175, "git_revision": "0820e9529756c09941fad5810c39412167d400ea", "revision_history": [{"33": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"52": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"54": "611216618f77af53c3d7e143d1e5c7804055cfd7"}, {"64": "e066466406a1f25826a845ca7eb714d14a9e707b"}, {"88": "e066466406a1f25826a845ca7eb714d14a9e707b"}, {"99": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"109": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"131": "822197812f72cca059d4c53b49ce954445db8e09"}, {"138": "0bc30f0d68e1d20e720a275bd477e640dba2e54c"}, {"142": "e067de21ffef257c6850ad602fa3464ee5e7630e"}, {"145": "5442c3324a2d02c040e580bcee8b1897d6c2f973"}, {"150": "5210c7aa50cdbc537f72ca7e3c57a2bd939250e5"}, {"157": "7e8e80eec125b3f2d241850cf14e23b1923a12fb"}, {"158": "7e8e80eec125b3f2d241850cf14e23b1923a12fb"}, {"175": "0820e9529756c09941fad5810c39412167d400ea"}], "ctags": [{"_type": "tag", "name": "NO_DB_MODE", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^NO_DB_MODE = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_effective_env_presence", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def _effective_env_presence() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_logger", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^_logger = get_logger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_health", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def get_health() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_healthz", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def get_healthz() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_db", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^def health_db() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/health.py", "pattern": "/^router = APIRouter(prefix=\"\\/health\", tags=[\"Health\"])$/", "language": "Python", "kind": "variable"}], "hash": "ea08fb876f1dd9b3d8d74645ede97d08", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/health.py", "fields": [{"name": "NO_DB_MODE = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_logger = get_logger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/health\", tags=[\"Health\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}