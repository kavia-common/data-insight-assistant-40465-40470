{"is_source_file": true, "format": "Python", "description": "This file defines REST API endpoints for managing 'Data' items using FastAPI, including listing, retrieving, creating, updating, and deleting data items. It uses SQLAlchemy for database operations and handles filtering, sorting, and projection of data.", "external_files": ["../db/sqlalchemy", "../models/schemas", "../models/sql_models"], "external_methods": ["get_db", "DataItemIn", "DataItemOut", "DataItemsPage", "PaginationMeta", "Item"], "published": ["list_data", "get_data_item", "create_data_item", "update_data_item", "delete_data_item"], "classes": [], "methods": [{"name": "_apply_filter(stmt, filter_obj: Optional[Dict[str, Any]])", "description": "Applies filtering conditions to the SQL statement based on provided filter object, supporting equality and nested data fields.", "scope": "", "scopeKind": ""}, {"name": "_apply_sort(stmt, sort_by: Optional[str], sort_dir: Optional[str])", "description": "Applies sorting to the SQL statement based on specified sort field and direction.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _project_item(it: Item, fields: Optional[str])", "description": "Projects a database Item object into a dictionary with optional field filtering.", "scope": "", "scopeKind": ""}, {"name": "DataItemsPage list_data( filter: Optional[str] = Query( default=None, description='JSON string filter on data.* keys. Example: {\"data.country\":\"US\"}', ), fields: Optional[str] = Query( default=None, description=\"Comma-separated fields to include (data.*). Example: data.name,data.age\", ), sort_by: Optional[str] = Query(default=None, description=\"Field to sort by (created_at, updated_at, or data.*).\"), sort_dir: Optional[str] = Query(default=\"asc\", pattern=\"^(asc|desc)$\", description=\"Sort direction.\"), limit: int = Query(default=50, ge=1, le=1000, description=\"Max items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), db: Session = Depends(get_db), )", "description": "Handles GET requests to list data items with optional filtering, projection, sorting, and pagination.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut get_data_item(item_id: str, db: Session = Depends(get_db))", "description": "Handles GET request to retrieve a single data item by UUID.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut create_data_item(payload: DataItemIn, db: Session = Depends(get_db))", "description": "Handles POST request to create a new data item.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut update_data_item(item_id: str, payload: DataItemIn, db: Session = Depends(get_db))", "description": "Handles PUT request to replace the data content of an existing data item.", "scope": "", "scopeKind": ""}, {"name": "None delete_data_item(item_id: str, db: Session = Depends(get_db))", "description": "Handles DELETE request to remove a data item by UUID.", "scope": "", "scopeKind": ""}], "calls": ["db.execute", "db.get", "db.add", "db.refresh", "db.delete", "db.commit", "json.loads", "jsonable_encoder", "UUID", "select", "func.count", "select", "select", "text"], "search-terms": ["FastAPI data router", "Data item CRUD", "SQLAlchemy filtering data", "Data projection and sorting", "UUID data item", "Data filtering JSON"], "state": 2, "file_id": 15, "knowledge_revision": 113, "git_revision": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08", "revision_history": [{"35": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"45": "3c81c8aeb8f50ad795128e86af25f55d4b647315"}, {"46": "3c81c8aeb8f50ad795128e86af25f55d4b647315"}, {"89": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"98": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"106": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"107": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"113": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}], "ctags": [{"_type": "tag", "name": "_apply_filter", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _apply_filter(stmt, filter_obj: Optional[Dict[str, Any]]):$/", "language": "Python", "kind": "function", "signature": "(stmt, filter_obj: Optional[Dict[str, Any]])"}, {"_type": "tag", "name": "_apply_sort", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _apply_sort(stmt, sort_by: Optional[str], sort_dir: Optional[str]):$/", "language": "Python", "kind": "function", "signature": "(stmt, sort_by: Optional[str], sort_dir: Optional[str])"}, {"_type": "tag", "name": "_project_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _project_item(it: Item, fields: Optional[str]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(it: Item, fields: Optional[str])"}, {"_type": "tag", "name": "create_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def create_data_item(payload: DataItemIn, db: Session = Depends(get_db)) -> DataItemOut:$/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(payload: DataItemIn, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def delete_data_item(item_id: str, db: Session = Depends(get_db)) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(item_id: str, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def get_data_item(item_id: str, db: Session = Depends(get_db)) -> DataItemOut:$/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(item_id: str, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_data", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def list_data($/", "language": "Python", "typeref": "typename:DataItemsPage", "kind": "function", "signature": "( filter: Optional[str] = Query( default=None, description='JSON string filter on data.* keys. Example: {\"data.country\":\"US\"}', ), fields: Optional[str] = Query( default=None, description=\"Comma-separated fields to include (data.*). Example: data.name,data.age\", ), sort_by: Optional[str] = Query(default=None, description=\"Field to sort by (created_at, updated_at, or data.*).\"), sort_dir: Optional[str] = Query(default=\"asc\", pattern=\"^(asc|desc)$\", description=\"Sort direction.\"), limit: int = Query(default=50, ge=1, le=1000, description=\"Max items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^router = APIRouter(prefix=\"\\/data\", tags=[\"Data\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def update_data_item(item_id: str, payload: DataItemIn, db: Session = Depends(get_db)) -> DataIt/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(item_id: str, payload: DataItemIn, db: Session = Depends(get_db))"}], "hash": "16988b4f90b3a95d1d55cf62064f66f8", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/data.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/data\", tags=[\"Data\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}