{"is_source_file": true, "format": "Python", "description": "This file defines FastAPI route handlers for managing 'DataItem' resources. It includes endpoints for listing, retrieving, creating, updating, and deleting data items stored in a database via SQLAlchemy models. The code features filtering, sorting, projection, and pagination functionalities for listing operations.", "external_files": ["../db/sqlalchemy", "../models/schemas", "../models/sql_models"], "external_methods": ["get_db", "DataItemIn", "DataItemOut", "DataItemsPage", "PaginationMeta", "Item"], "published": ["router"], "classes": [], "methods": [{"name": "_apply_filter(stmt, filter_obj: Optional[Dict[str, Any]])", "description": "Applies filtering conditions to a SQLAlchemy statement based on provided filter object, supporting equality filters on data fields and ID.", "scope": "", "scopeKind": ""}, {"name": "_apply_sort(stmt, sort_by: Optional[str], sort_dir: Optional[str])", "description": "Adds sorting to a SQLAlchemy statement based on specified sort field and direction.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _project_item(it: Item, fields: Optional[str])", "description": "Projects a database Item instance into a dictionary with selected fields, supporting data field filtering.", "scope": "", "scopeKind": ""}, {"name": "DataItemsPage list_data( filter: Optional[str] = Query( default=None, description='JSON string filter on data.* keys. Example: {\"data.country\":\"US\"}', ), fields: Optional[str] = Query( default=None, description=\"Comma-separated fields to include (data.*). Example: data.name,data.age\", ), sort_by: Optional[str] = Query(default=None, description=\"Field to sort by (created_at, updated_at, or data.*).\"), sort_dir: Optional[str] = Query(default=\"asc\", pattern=\"^(asc|desc)$\", description=\"Sort direction.\"), limit: int = Query(default=50, ge=1, le=1000, description=\"Max items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), db: Session = Depends(get_db), )", "description": "Endpoint to retrieve a paginated, filtered, and sorted list of data items.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut get_data_item(item_id: str, db: Session = Depends(get_db))", "description": "Retrieve a single data item by UUID.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut create_data_item(payload: DataItemIn, db: Session = Depends(get_db))", "description": "Create a new data item with data payload.", "scope": "", "scopeKind": ""}, {"name": "DataItemOut update_data_item(item_id: str, payload: DataItemIn, db: Session = Depends(get_db))", "description": "Update an existing data item identified by UUID with new data payload.", "scope": "", "scopeKind": ""}, {"name": "None delete_data_item(item_id: str, db: Session = Depends(get_db))", "description": "Delete a data item by UUID.", "scope": "", "scopeKind": ""}], "calls": ["select", "func.count", "db.execute", "db.get", "db.add", "db.commit", "db.refresh", "db.delete", "json.loads", "jsonable_encoder", "UUID", "HTTPException"], "search-terms": ["FastAPI data router", "SQLAlchemy item filtering", "Data items CRUD API", "filter, sort, projection FastAPI", "UUID primary key routes"], "state": 2, "file_id": 15, "knowledge_revision": 115, "git_revision": "822197812f72cca059d4c53b49ce954445db8e09", "revision_history": [{"35": "de8dac7f2dbfa13add05824461f11be20f7998ad"}, {"45": "3c81c8aeb8f50ad795128e86af25f55d4b647315"}, {"46": "3c81c8aeb8f50ad795128e86af25f55d4b647315"}, {"89": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"98": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"106": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"107": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"113": "525a4ee3142b3f0e14bd32ed9d48e3f89e0b6a08"}, {"115": "822197812f72cca059d4c53b49ce954445db8e09"}], "ctags": [{"_type": "tag", "name": "_apply_filter", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _apply_filter(stmt, filter_obj: Optional[Dict[str, Any]]):$/", "language": "Python", "kind": "function", "signature": "(stmt, filter_obj: Optional[Dict[str, Any]])"}, {"_type": "tag", "name": "_apply_sort", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _apply_sort(stmt, sort_by: Optional[str], sort_dir: Optional[str]):$/", "language": "Python", "kind": "function", "signature": "(stmt, sort_by: Optional[str], sort_dir: Optional[str])"}, {"_type": "tag", "name": "_project_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def _project_item(it: Item, fields: Optional[str]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(it: Item, fields: Optional[str])"}, {"_type": "tag", "name": "create_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def create_data_item(payload: DataItemIn, db: Session = Depends(get_db)) -> DataItemOut:$/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(payload: DataItemIn, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "delete_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def delete_data_item(item_id: str, db: Session = Depends(get_db)) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(item_id: str, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def get_data_item(item_id: str, db: Session = Depends(get_db)) -> DataItemOut:$/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(item_id: str, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "list_data", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def list_data($/", "language": "Python", "typeref": "typename:DataItemsPage", "kind": "function", "signature": "( filter: Optional[str] = Query( default=None, description='JSON string filter on data.* keys. Example: {\"data.country\":\"US\"}', ), fields: Optional[str] = Query( default=None, description=\"Comma-separated fields to include (data.*). Example: data.name,data.age\", ), sort_by: Optional[str] = Query(default=None, description=\"Field to sort by (created_at, updated_at, or data.*).\"), sort_dir: Optional[str] = Query(default=\"asc\", pattern=\"^(asc|desc)$\", description=\"Sort direction.\"), limit: int = Query(default=50, ge=1, le=1000, description=\"Max items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^router = APIRouter(prefix=\"\\/data\", tags=[\"Data\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_data_item", "path": "/home/kavia/workspace/code-generation/data-insight-assistant-40465-40470/fastapi_backend/src/routers/data.py", "pattern": "/^def update_data_item(item_id: str, payload: DataItemIn, db: Session = Depends(get_db)) -> DataIt/", "language": "Python", "typeref": "typename:DataItemOut", "kind": "function", "signature": "(item_id: str, payload: DataItemIn, db: Session = Depends(get_db))"}], "hash": "9757c9feaa9fa60b114513ad8f1bd4dc", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/data.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/data\", tags=[\"Data\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}